.works {
    padding-top: var(--spacing-4xl);
    padding-bottom: var(--spacing-4xl);
}

.section-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    margin-bottom: var(--spacing-2xl);
}

.section-title {
    font-family: var(--font-family-primary);
    font-size: var(--font-size-3xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-text-primary);
    margin-bottom: var(--spacing-xs);
}

.section-subtitle {
    font-family: var(--font-family-body);
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    margin: 0;
}

.explore-link {
    font-family: var(--font-family-primary);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-bold);
    color: #e76f51;
    /* Red/Orange from logo/design */
    text-decoration: underline;
    text-underline-offset: 4px;
}

/* Golden Ratio Grid Layout */
.works-grid {
    display: grid;
    /* Golden Ratio Columns: ~1.618 : 1 : 1 */
    grid-template-columns: 1.618fr 1fr 1fr;
    grid-template-rows: repeat(3, 1fr);
    gap: var(--spacing-sm);

    /* Constrain height to viewport minus header (approx 150-200px) */
    height: calc(100vh - 200px);
    width: 100%;

    /* Ensure content stays within strict bounds */
    overflow: hidden;
}

/* 
   Golden Spiral / Asymetric Layout Strategy for up to ~6 items 
   1. The Main Focus (Left Column)
   2. Secondary Focus (Right Side)
   
   Specific Layouts for exact item counts to ensure full coverage (Gap Filling)
*/

/* Item 1: The Big One - Always takes entire first column */
.work-card:nth-child(1) {
    grid-column: 1 / 2;
    grid-row: 1 / -1;
}

/* --- Scenario: Exactly 2 Items --- */
/* Item 2 fills the entire right side */
.works-grid:has(.work-card:nth-child(2)):not(:has(.work-card:nth-child(3))) .work-card:nth-child(2) {
    grid-column: 2 / 4;
    grid-row: 1 / -1;
}

/* --- Scenario: Exactly 3 Items --- */
/* Split Right side into 2 equal horizontal blocks */
.works-grid:has(.work-card:nth-child(3)):not(:has(.work-card:nth-child(4))) {
    grid-template-rows: repeat(2, 1fr);
    /* Switch to 2 rows for cleaner split */
}

.works-grid:has(.work-card:nth-child(3)):not(:has(.work-card:nth-child(4))) .work-card:nth-child(2) {
    grid-column: 2 / 4;
    grid-row: 1 / 2;
}

.works-grid:has(.work-card:nth-child(3)):not(:has(.work-card:nth-child(4))) .work-card:nth-child(3) {
    grid-column: 2 / 4;
    grid-row: 2 / 3;
}

/* --- Scenario: Exactly 4 Items --- */
/* Right side: Top Half (Item 2), Bottom Half Split L/R (Items 3 & 4) */
.works-grid:has(.work-card:nth-child(4)):not(:has(.work-card:nth-child(5))) {
    grid-template-rows: repeat(2, 1fr);
}

.works-grid:has(.work-card:nth-child(4)):not(:has(.work-card:nth-child(5))) .work-card:nth-child(2) {
    grid-column: 2 / 4;
    grid-row: 1 / 2;
    /* Top Half */
}

.works-grid:has(.work-card:nth-child(4)):not(:has(.work-card:nth-child(5))) .work-card:nth-child(3) {
    grid-column: 2 / 3;
    grid-row: 2 / 3;
    /* Bottom Left */
}

.works-grid:has(.work-card:nth-child(4)):not(:has(.work-card:nth-child(5))) .work-card:nth-child(4) {
    grid-column: 3 / 4;
    grid-row: 2 / 3;
    /* Bottom Right */
}

/* --- Scenario: Exactly 5 Items (Default Base) --- */
/* 
   Item 2: Top Right Wide strip
   Item 3: Middle Right Left-side (Tall)
   Item 4: Middle Right Right-side
   Item 5: Bottom Right Right-side
*/

/* Default 5-item placement (fallback for when specific queries aren't met, or base 5) */
.work-card:nth-child(2) {
    grid-column: 2 / 4;
    grid-row: 1 / 2;
}

.work-card:nth-child(3) {
    grid-column: 2 / 3;
    grid-row: 2 / 4;
    /* Spans bottom 2 rows */
}

.work-card:nth-child(4) {
    grid-column: 3 / 4;
    grid-row: 2 / 3;
}

.work-card:nth-child(5) {
    grid-column: 3 / 4;
    grid-row: 3 / 4;
}

/* If more items exist (6, 7...), this grid might overlap or hide them if not handled. 
   For a strict "single screen" design, we usually limit visible items or they assume auto-placement.
   Let's allow auto-placement for overflow but ideally the design is meant for ~5 top works.
*/
.work-card:nth-child(n+6) {
    display: none;
    /* Hide overflow items to preserve the strict layout, or let them fall into implicit rows which might overflow height */
}

/* --- Dynamic Adaptive Layout for 6-9 Items --- */

/* Base Dense Logic: If 6+ items, switch to 4 rows, Item 1 takes Left Half */
.works-grid:has(.work-card:nth-child(6)) {
    grid-template-rows: repeat(4, 1fr);
}

.works-grid:has(.work-card:nth-child(6)) .work-card:nth-child(1) {
    grid-row: 1 / -1;
    /* Full height */
    grid-column: 1 / 2;
}

/* Reset others to flow into right side (Cols 2-4 â†’ effectively 2 cols total width) */
.works-grid:has(.work-card:nth-child(6)) .work-card:nth-child(n+2) {
    grid-column: auto;
    /* Will fill cols 2 and 3 */
    grid-row: auto;
    display: flex;
}

/* 
   Gap Filling Logic - Mosaic / Bento Style
   Right side is 2 columns x 4 rows = 8 slots. 
   We interleave wide and small items to create an irregular "mosaic" feel.
*/

/* Scenario: Exactly 6 Items. (Right side: 5 items. Need to fill 8 slots. 3 items must span 2 cols) */
/* Pattern: Wide, Small, Small, Wide, Wide */
.works-grid:has(.work-card:nth-child(6)):not(:has(.work-card:nth-child(7))) .work-card:nth-child(2) {
    grid-column: span 2;
}

.works-grid:has(.work-card:nth-child(6)):not(:has(.work-card:nth-child(7))) .work-card:nth-child(5) {
    grid-column: span 2;
}

.works-grid:has(.work-card:nth-child(6)):not(:has(.work-card:nth-child(7))) .work-card:nth-child(6) {
    grid-column: span 2;
}

/* Scenario: Exactly 7 Items. (Right side: 6 items. Need to fill 8 slots. 2 items must span 2 cols) */
/* Pattern: Checkered - Wide, Small, Small, Wide, Small, Small */
.works-grid:has(.work-card:nth-child(7)):not(:has(.work-card:nth-child(8))) .work-card:nth-child(2) {
    grid-column: span 2;
}

.works-grid:has(.work-card:nth-child(7)):not(:has(.work-card:nth-child(8))) .work-card:nth-child(5) {
    grid-column: span 2;
}

/* Scenario: Exactly 8 Items. (Right side: 7 items. Need to fill 8 slots. 1 item must span 2 cols) */
/* Pattern: Small, Small, Wide, Small, Small, Small... (Break the grid in the middle) */
.works-grid:has(.work-card:nth-child(8)):not(:has(.work-card:nth-child(9))) .work-card:nth-child(4) {
    grid-column: span 2;
}

/* Scenario: 9 Items. (Right side: 8 items. All 1x1. Default behavior fills perfectly) */

/* Hide 10+ items */
.works-grid:has(.work-card:nth-child(6)) .work-card:nth-child(n+10) {
    display: none;
}


.work-card {
    border-radius: var(--border-radius-lg);
    padding: var(--spacing-lg);

    width: 100%;
    height: 100%;
    /* Force fill grid cell */
    min-height: 0;
    /* Allow shrinking below content size if needed */

    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden;
    transition: transform var(--transition-normal);
    cursor: pointer;
    box-sizing: border-box;
}

/* Internal card layout adjustments for small sizes */
.work-card h3 {
    font-size: var(--font-size-xl);
}

.work-card p {
    font-size: var(--font-size-sm);
}

/* Responsive adjustment */
@media (max-width: 900px) {
    .works-grid {
        height: auto;
        /* Allow scrolling on tablet/mobile */
        grid-template-columns: 1fr 1fr;
        grid-template-rows: auto;
    }

    .work-card:nth-child(1) {
        grid-column: span 2;
        grid-row: span 2;
    }

    .work-card:nth-child(2) {
        grid-column: span 1;
        grid-row: span 1;
    }

    .work-card:nth-child(3) {
        grid-column: span 1;
        grid-row: span 1;
    }

    .work-card:nth-child(n) {
        grid-column: auto;
        grid-row: auto;
    }

    .work-card:nth-child(n+6) {
        display: flex;
    }

    /* Show all on mobile */

    .work-card {
        min-height: 250px;
    }
}

@media (max-width: 600px) {
    .section-header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--spacing-md);
    }

    .works-grid {
        grid-template-columns: 1fr;
    }

    .work-card {
        height: 350px;
    }
}